<!DOCTYPE html>
<html>

<head>
	<title>CISC325</title>
	<meta charset="utf-8" />
	<meta name="Yu" content=""/>
	<link href="https://fonts.googleapis.com/css?family=PT+Serif|Josefin+Sans" rel="stylesheet"> 
	<link rel="stylesheet" href="css/style.css">		
	<link rel="stylesheet" href="css/responsive.css">
	<link rel="stylesheet" href="css/calendar.css">
</head>

<body>
	<header>
		<nav>
			<ul>		
				<li><a href="./index.html">Home</a></li>
				<li><a href="./login.html">Login</a></li>
			</ul>		
		</nav>
	</header>

	<article id="main-content">
		<div>
			<div class = "container">
			  <ul class="month">
				<li id="prev"><button onclick = "prev()">&#10094;</button></li>
				<li id = "title">
					<h1 id="month">August</h1>
					<h2 id="year" style="font-size:18px">2017</h2>
				</li>
				<li id="next"><button onclick = "next()">&#10095;</button></li>
			  </ul>
			  
			  <ul class="weekdays">
			  	  <li>Su</li>
				  <li>Mo</li>
				  <li>Tu</li>
				  <li>We</li>
				  <li>Th</li>
				  <li>Fr</li>
				  <li>Sa</li>
			  </ul>
			</div>
	
			<ul id="days">
			  	
		    </ul>
		</div>
		
		<script>
			var dict = {
				1 : "January",
				2 : "February",
				3 : "March",
				4 : "April",
				5 : "May",
				6 : "June",
				7 : "July",
				8 : "August",
				9 : "September",
				10 : "October",
				11 : "November",
				12 : "December"
			}	
			var today = new Date();
			var month = today.getMonth() + 1;
			var year = today.getFullYear();
			var todayNum = today.getDate();
			document.getElementById("month").innerHTML = dict[month];
			document.getElementById("year").innerHTML = year;
			
			function prev(){
				if(month <= 1){
					month = 12;
					year = year - 1;
					document.getElementById("month").innerHTML = dict[month];
					document.getElementById("year").innerHTML = year;
				}else{
					month = month - 1;
					document.getElementById("month").innerHTML = dict[month];
				}
				days();
			}
			
			function next(){
				if(month >= 12){
					month = 1;
					year = year + 1;
					document.getElementById("month").innerHTML = dict[month];
					document.getElementById("year").innerHTML = year;
				}else{
					month = month + 1;
					document.getElementById("month").innerHTML = dict[month];
				}
				days();
			}
			
			var normal = [31,28,31,30,31,30,31,31,30,31,30,31];
			var olympic = [31,29,31,30,31,30,31,31,30,31,30,31];
			
			function days(){
				var days = document.getElementById("days");
				days.innerHTML = "";
				var temp = year % 4;
				if(temp == 0){
					var dayNum = olympic[month - 1];
				}else{
					var dayNum = normal[month - 1];	
				}
				
				var firstDay = new Date(year,month - 1,1);
				var firstWeekDay = firstDay.getDay();
				
				for(var i = 0;i < firstWeekDay;i++){
					var str = ""
					var newNode = document.createElement("LI");
					var text = document.createTextNode(str);
					newNode.appendChild(text);
					document.getElementById("days").appendChild(newNode);
				}
				
				for(var i = 0;i < dayNum;i++){
					var newNode = document.createElement("LI");
					var buttonNode = document.createElement("BUTTON");
					
					buttonNode.setAttribute('class', 'dates');
					buttonNode.textContent = i+1;
					
					if((i+1) == todayNum){
						buttonNode.id = 'today';
						buttonNode.style.fontWeight = 'bold';
						
					}
					
					newNode.appendChild(buttonNode);
					document.getElementById("days").appendChild(newNode);
				}
				setButtons();
			}
			
			days();
		</script>
	
	</article> <!-- #main-content -->
	
	<footer>
		<div id = "timeSlots">
			<ul>
				<li id = "slots"></li>
			</ul>
		</div>
		
		<script>
			setButtons();
			function setButtons(){
				var el = document.getElementsByClassName("dates");
				for(var i = 0;i < el.length;i++){
					el[i].addEventListener("mouseover",showSlots);	
					el[i].addEventListener("mouseout",closeSlots);
					el[i].addEventListener("click",clickDates);
				}
			}
			
			function showSlots(){
				document.getElementById("slots").innerHTML = "time slots informatiomn";
			}
			
			function closeSlots(){
				document.getElementById("slots").innerHTML = "";	
			}
			
			function clickDates(){
				var target = event.target || event.srcElement;
				var info = year + '-' + month + '-' + target.textContent;
				sessionStorage.setItem("year-month-day",info)
				var newPage = window.open("./signup.html", "_self");
			}
		</script>
	</footer>
	
	
</body>
</html>
